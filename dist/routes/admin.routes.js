"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = require("express");
const AdminController_1 = require("../controllers/AdminController");
const auth_1 = require("../middlewares/auth");
const uploadMiddleware_1 = require("../middlewares/uploadMiddleware");
const uploadMiddleware_2 = require("../middlewares/uploadMiddleware");
const adminRoutes = (0, express_1.Router)();
adminRoutes.post('/login', AdminController_1.adminController.login);
adminRoutes.use(auth_1.authMiddleware, auth_1.isAdmin);
adminRoutes.post('/notifications/send', AdminController_1.sendNotification);
adminRoutes.delete('/notifications/:id', AdminController_1.adminController.deleteNotification);
adminRoutes.delete('/notifications', AdminController_1.adminController.clearNotifications);
adminRoutes.post('/uploads/sign', AdminController_1.adminController.signCloudinaryUpload);
adminRoutes.post('/properties', uploadMiddleware_1.mediaUpload.fields([
    { name: 'images', maxCount: 20 },
    { name: 'video', maxCount: 1 },
]), AdminController_1.adminController.createProperty);
adminRoutes.get('/users', AdminController_1.adminController.getAllUsers);
adminRoutes.post('/users', AdminController_1.adminController.createUser);
adminRoutes.delete('/users/:id', AdminController_1.adminController.deleteUser);
adminRoutes.get('/clients', AdminController_1.adminController.getAllClients);
adminRoutes.get('/clients/:id', AdminController_1.adminController.getClientById);
adminRoutes.put('/clients/:id', AdminController_1.adminController.updateClient);
adminRoutes.get('/clients/:id/properties', AdminController_1.adminController.getClientProperties);
adminRoutes.post('/brokers', uploadMiddleware_2.brokerDocsUpload.fields([
    { name: 'creciFront', maxCount: 1 },
    { name: 'creciBack', maxCount: 1 },
    { name: 'selfie', maxCount: 1 },
]), AdminController_1.adminController.createBroker);
adminRoutes.get('/brokers', AdminController_1.adminController.listBrokers);
adminRoutes.get('/brokers/pending', AdminController_1.adminController.listPendingBrokers);
adminRoutes.get('/brokers/:id', AdminController_1.adminController.getBrokerById);
adminRoutes.patch('/brokers/:id/approve', AdminController_1.adminController.approveBroker);
adminRoutes.patch('/brokers/:id/reject', AdminController_1.adminController.rejectBroker);
adminRoutes.patch('/brokers/:id/status', AdminController_1.adminController.updateBrokerStatus);
adminRoutes.put('/brokers/:id', AdminController_1.adminController.updateBroker);
adminRoutes.delete('/brokers/:id', AdminController_1.adminController.deleteBroker);
adminRoutes.get('/brokers/:id/properties', AdminController_1.adminController.getBrokerProperties);
adminRoutes.get('/properties-with-brokers', AdminController_1.adminController.listPropertiesWithBrokers);
adminRoutes.get('/properties/:id', AdminController_1.adminController.getPropertyDetails);
adminRoutes.put('/properties/:id', AdminController_1.adminController.updateProperty);
adminRoutes.delete('/properties/:id', AdminController_1.adminController.deleteProperty);
adminRoutes.patch('/properties/:id/approve', AdminController_1.adminController.approveProperty);
adminRoutes.patch('/properties/:id/reject', AdminController_1.adminController.rejectProperty);
adminRoutes.patch('/properties/:id/status', AdminController_1.adminController.updatePropertyStatus);
adminRoutes.get('/featured-properties', AdminController_1.adminController.listFeaturedProperties);
adminRoutes.put('/featured-properties', AdminController_1.adminController.updateFeaturedProperties);
adminRoutes.post('/properties/:id/images', uploadMiddleware_1.mediaUpload.array('images', 20), AdminController_1.adminController.addPropertyImage);
adminRoutes.post('/properties/:id/video', uploadMiddleware_1.mediaUpload.single('video'), AdminController_1.adminController.addPropertyVideo);
adminRoutes.delete('/properties/:id/video', AdminController_1.adminController.deletePropertyVideo);
adminRoutes.delete('/properties/:id/images/:imageId', AdminController_1.adminController.deletePropertyImage);
adminRoutes.get('/notifications', AdminController_1.adminController.getNotifications);
adminRoutes.post('/brokers/:id/cleanup', AdminController_1.adminController.cleanupBroker);
adminRoutes.get('/dashboard/stats', AdminController_1.getDashboardStats);
adminRoutes.get('/stats/dashboard', AdminController_1.getDashboardStats);
exports.default = adminRoutes;
